<p align="center">
  <img src="https://github.com/rdc-mitchell/qng23-challenge/blob/main/assets/images/Header.jpg?raw=true" alt="header"/>
</p>

# Problem Brief
Download: [PDF](/assets/docs/QNG23%20Problem%20brief.pdf)

## Introduction
1. This brief:
    <ol type="a">
        <li>provides key background information on quantum magnetometers and the magnetic signatures of land mines to support teams</li>
        <li>defines the models of scenario generation, drone flight and magnetometer measurements that are being employed, and</li>
        <li>adds further technical details to the tasks of the Challenge stages</li>
    </ol>
so that you can more deeply understand and engage with the Challenge. At the end of the brief, possible directions of future development beyond the Challenge are identified to give an indication of the work that winning teams may undertake.

## Introduction to quantum magnetometers
2. Quantum magnetometers are sensors that exploit a quantum system and its phenomena to precisely measure magnetic fields. Examples are superconducting quantum interference devices (SQUIDs), atomic vapour cells and diamond NV centres (see [this paper](https://journals.aps.org/rmp/abstract/10.1103/RevModPhys.89.035002) for further examples). The advantage of the latter two are that they operate at room temperature and pressure, and can be readily miniaturised to the required size, weight and power to operate on small unmanned aerial systems (UAS)/ drones (see [this post](https://researchcentre.army.gov.au/library/land-power-forum/army-quantum-technology-challenge-2021)). Indeed, this is a key motivation for this Challenge – given the possibility of equipping drones with these sensors, will it be possible to detect land mines at new speed and scale that is otherwise impossible with current technology.
3. Different quantum magnetometers detect different magnetic quantities. Scalar sensors, like atomic vapour cells, detect the magnitude of the magnetic field $|\vec{B}|$. Whereas vectors sensors, like diamond NV centres, detect one, two or all three vector components of the magnetic field $\vec{B}$. These sensors can then be combined to create gradiometers and tensor gradiometers, which then measure the gradients in the field magnitude or the gradients of all vector components, respectively. In this Challenge, the objective is not to compare these sensors, but rather to answer the key question above. As such, a vector quantum magnetometer has been chosen as the platform for this Challenge as the middle ground between scalar and the more complex gradiometers.

## Introduction to the magnetic signatures of land mines
4. Land mines are incredibly diverse but can be broadly categorised as either anti-personnel or anti-tank mines. They are used by military forces to create obstacles and deny areas to their adversaries. They are produced at scale and are highly uniform in how they are deployed. The production and use of anti-personnel mines is banned under the [UN Anti-personnel Mine Ban Convention](https://en.wikipedia.org/wiki/Ottawa_Treaty). Thus, this Challenge will focus on anti-tank mines. Note that improvised explosive devices (IEDs) used by irregular forces are not being considered. Compared to mines, these are highly irregular in design, scale and deployment.
5. Many variants of anti-tank mines (in particular older variants) have a metal housing and/ or substantial metal components that produce a magnetic signature. They are typically of the scale of ~5-10 kg and ~200-300 mm in diameter. However, it is important to note that some anti-tank mines are explicitly designed to minimise their magnetic signature and so, whilst this Challenge focuses on magnetometers, these sensors will ultimately need to be fused with other sensors (e.g. optical) to more comprehensively and confidently detect mines.
6. The magnetic signature of mines is primarily due to the induced magnetisation of the mine’s metal components in the presence of the Earth’s magnetic field $` \vec B_{Earth} `$ The permanent magnetisation of the mine is likely to be small compared to this induced magnetisation due to the types of metals employed. The induced magnetisation of a mine is a complex interaction between the Earth’s field and the geometry and permeability of the mine’s components. However, at sufficient distance from the mine, the magnetic field created by its induced magnetisation is well described by the field created by the simplest component of the mine’s induced magnetisation – its induced magnetic dipole $` \vec μ `$. Mathematically, this dipole field is
$` \vec B_{dip} (\vec r)= \frac{C}{r^3} \left( \frac{3(\vec{r} \cdot \vec{μ})\vec{r}}{r^2} -\vec{μ} \right) `$
where $` C=\frac{μ_0}{4π} \sim 10^{-7} \ T.m/A `$ is a constant, $` \vec r `$ is the displacement vector from the position of the mine and the point of observation, $`\vec μ=\overleftrightarrow α \cdot \vec B_{Earth}`$ and $`\overleftrightarrow α`$ is the magnetizability of the mine. The magnetizability is the key property of the landmine that encodes the complexity of how the geometry and permeability of its components yields a dipole moment in the presence of an external magnetic field. Note that the magnetic dipole $`\vec μ`$ has units of $`A.m^2`$.
7. Now, the direction and magnitude of the Earth's magnetic field depends on the position of the mine field on the Earth and the time of day. But, over the dimensions of a typical mine field it is uniform (ignoring local environmental anomalies, such as geological formations). Consequently, it is reasonable to expect that within a mine field, the dipole moment of each mine will be uniform in strength and orientation. With some intelligence about the mines that have been deployed and knowledge of the local Earth's magnetic field, the dipole moments can thus be estimated before surveying the mine field.

## Definitions of the models being employed in this Challenge
8. Scenario generation model. Thousands of scenarios have been generated to enable you to develop your solutions and for them to be evaluated. Each scenario consists of a 101 x 101 m square of land. This land is assumed to be perfectly flat and oriented in the East North Up (ENU) coordinate system corresponding to xyz, i.e. the first vector component is positive in the east direction, the second is positive in the North direction and the third is positive in the upward direction. The data is typically shown as a top-down view x and y coordinates denoted as Eastings and Northings respectively and are indicative of distance in the East and North directions.
9. Each scenario has a random latitude and longitude used to generate the local Earth magnetic field $`\vec B_{Earth}`$. The Earth field is uniform across the scenario space. When combined with models of the magnetizability of anti-tank mines, the magnitude of mine dipole moments $`|\vec μ|`$ ranges from $`10^{-3}`$ to $`10^{-2} \ A.m^2`$. The dipole moment for each scenario will be provided to you as a vector $`\vec μ`$ in ENU coordinates. Remember that all mines within a scenario will have this dipole moment.
10. In Stage 1 of the challenge, a random number of land mines are randomly placed in each scenario (mines are placed at ground level with a random position in the East and North direction). Mine locations are not constrained to the grid, i.e. a mine may be at 10.2 m East and 25.3 m North. In Stages 2 and 3, a random number of background magnetic anomalies have also been randomly placed. These anomalies have random dipole orientations and magnitudes with a normal distribution of $`|\vec μ|=5×10^{-3} \ A.m^2`$. Importantly, unlike the land mines, they do not have uniform dipole moments within a scenario and may also be located from ground level to a depth of 30 m below ground level
11. Drone flight model. The drone is approximated to fly at a perfect altitude of 10 m above the ground. As per Figure 1, the lateral x-y coordinates (East North, denoted as Eastings and Northings corresponding to meters East and meters North) have been divided into a discrete lattice of pitch 1 m. The lattice is indexed at 0 meters at the Southwest most point and the position of the drone in each lattice square is taken to be the centre of that square. The drone is assumed to be always perfectly orientated to the xyz (ENU) coordinate system created by this lattice.

<img src="/assets/images/figure-1.png" width="90%"/>

> Figure 1: Example magnetic field in the $` B_{up} `$ direction and lattice coordinate system in Eastings and Northings. Mine locations are marked with a red x.

<img src="/assets/images/figure-2.png" width="90%"/>

> Figure 2: Same data as Figure 1 showing all three vector directions of $` \vec B `$. Grid lines have been removed for clarity.
12. Time has been divided into discrete steps of 10 s. The drone is considered to instantaneously hop between lattice squares, where it dwells for at least one time step.
13. In stages 1 and 2, the magnetic images supplied have been created by assuming a surveying flight pattern (see Figure 3), where the drone has moved one lattice square at a time and dwells one time step in each lattice square.

<img src="/assets/images/figure-3-left.png" width="40%"/> <img src="/assets/images/figure-3-right.png" width="40%"/>

> Figure 3: (left) The surveying flight pattern (red) used for stages 1 and 2, and (right) a visualisation of the flight constraints applied in stage 3 that limit the range of drone hops in each time step. Red line shows drone path, crosses show dwell points and green circles show allowable next dwell points from the last position of the drone. Area grid has been reduced to 10 m x 10 m for clarity in both cases.

14. In stage 3, you must specify the drone flight path. Following the magnetic measurement of each time step, you must specify the lattice position for the drone for the next time step. This can be any selection from no change in position to a change of up to 2 meters in each direction (max velocity of 0.283 m/s), which encodes the finite velocity and acceleration limits of drones. See Figure 3 for a visualisation of these flight constraints.
15. Measurement model. A vector magnetometer with a sensitivity of 1 $`pT/√Hz`$ and zero drift has been selected. It is assumed that the Earth's magnetic field is perfectly known and is subtracted from the sensor’s measurement of the total magnetic field to give a measurement output of just the local anomaly field generated by the magnetic dipole moments of the land mines and background magnetic anomalies. At each time step, the returned measurement is then a three component vector, where each component has been randomly selected from a Gaussian distribution whose mean is the actual anomaly field component at that lattice position and whose standard deviation is 0.3 $`pT`$. This means that if you stay more than one time step at a given lattice position, then you can average results to get a more precise measurement of the magnetic field at that position.
Further details of Challenge tasks
16. Stage 1. Your task is to develop a method for analysing magnetic field images that identifies all of the land mines in a scenario and locates them with the greatest possible precision. You need to demonstrate this method by developing software that implements it automatically. You will be given the magnetic field images and corresponding locations of land mines for 1000 scenarios so that you can develop your method and software. Your solution will then be tested by you being provided with the magnetic field images of 1000 scenarios and being asked to return the locations of the land mines in each scenario. You will have two hours from receiving the test scenarios to return your results. If you do not locate all land mines in a scenario, then it does not count towards your score $`(N_{est} < N_{mines})`$. If you locate more than 110% the total number of mines, then it does not count towards your score $`(N_{est}>1.1×N_{mines})`$. If you find the correct number withing the 10% false positive limit, then the precision of your locating will be calculated by the Hausdorff distance from the set of true mine positions to your estimates (smaller is better).
17. Stage 2. As per stage 1, but with the complexity of the background magnetic anomalies that make it more difficult to find the land mines.
18. Stage 3. Now your task is to fly the drone in real time and locate all of the land mines in a scenario in the minimum amount of time. You will need to develop methods and software that, for each time step, receives a magnetic field measurement and then decides on the position of the drone for the next time step or that all land mines have been found and so ends the search. You will be provided 1000 scenarios and their corresponding mine locations, as well as a python function that allows you to emulate the flight model of the drone and the delivery of measurements to your software at each time step. You should use these scenarios to develop your solution. Your solution will then be tested in real time over 10 scenarios, by making calls to our server for measurements (instead of the python function). For each test scenario, you will only register a score if you locate all land mines (with up to 10% false positive) and with a Hausdorff distance that meets a criterion that will be specified after stage 2. Your score will be the total flight time for that scenario (which you are seeking to minimise). 
19. Note that the simple solution to stage 3 is to use your solution for stage 2, by simply following the surveying flight trajectory. However, this is unlikely to be the best solution because there is likely to be faster search times.
## Directions of future work for winning teams
20. Given the above model definitions and the expected technical development within the Challenge, there are some clear avenues of future work that may be undertaken by the winning teams to increase the accuracy of the models and predictions of the performance of quantum magnetometers in land mine detection. These avenues are:
    <ol type="a">
        <li>different types of sensors (scalar, gradiometer, tensor gradiometer)</li>
        <li>non-flat terrain (but fixed altitude)</li>
        <li>refined magnetic signature models</li>
        <li>dealing with imperfect earth field subtraction (i.e. crustal fields introducing local variations ...)</li>
        <li>flight model from discrete time and space hopping to continuous flight.</li>
    </ol>
